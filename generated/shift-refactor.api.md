## API Report File for "shift-refactor"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts

import { AssignmentExpression } from 'shift-ast';
import { AssignmentTargetIdentifier } from 'shift-ast';
import { BindingIdentifier } from 'shift-ast';
import { ClassDeclaration } from 'shift-ast';
import { ClassExpression } from 'shift-ast';
import { Declaration } from 'shift-scope';
import { Expression } from 'shift-ast';
import { FunctionDeclaration } from 'shift-ast';
import { FunctionExpression } from 'shift-ast';
import { IdentifierExpression } from 'shift-ast';
import { Node } from 'shift-ast';
import { Reference } from 'shift-scope';
import { Scope } from 'shift-scope';
import { ScopeLookup } from 'shift-scope';
import { Statement } from 'shift-ast';
import { Variable } from 'shift-scope';
import { VariableDeclarator } from 'shift-ast';

// @public (undocumented)
export type AsyncReplacer = Replacer | ((node: Node) => Promise<Node | string>);

// @public (undocumented)
export class GlobalState {
    // Warning: (ae-forgotten-export) The symbol "GlobalStateOptions" needs to be exported by the entry point index.d.ts
    constructor(sourceOrNode: string | Node, config?: GlobalStateOptions);
    // (undocumented)
    autoCleanup: boolean;
    // (undocumented)
    cleanup(): this;
    // (undocumented)
    conditionalCleanup(): this;
    // (undocumented)
    findDeclarations(node: SimpleIdentifier | SimpleIdentifierOwner): Declaration[];
    // (undocumented)
    findParents(selectorOrNode: SelectorOrNode): Node[];
    // (undocumented)
    findReferences(node: SimpleIdentifier | SimpleIdentifierOwner): Reference[];
    // (undocumented)
    generate(ast?: Node): any;
    // (undocumented)
    getInnerScope(node: FunctionDeclaration): Scope | undefined;
    // (undocumented)
    getLookupTable(): ScopeLookup;
    // (undocumented)
    insert(selectorOrNode: SelectorOrNode, replacer: Replacer, after?: boolean): ReturnType<typeof GlobalState.prototype.conditionalCleanup>;
    // (undocumented)
    isDirty(dirty?: boolean): boolean;
    // Warning: (ae-forgotten-export) The symbol "SimpleIdentifierOwner" needs to be exported by the entry point index.d.ts
    // Warning: (ae-forgotten-export) The symbol "SimpleIdentifier" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    lookupScope(variableLookup: Variable | Variable[] | SimpleIdentifierOwner | SimpleIdentifierOwner[] | SimpleIdentifier | SimpleIdentifier[]): Scope | undefined;
    // (undocumented)
    lookupVariable(node: SimpleIdentifierOwner | SimpleIdentifierOwner[] | SimpleIdentifier | SimpleIdentifier[]): Variable;
    // (undocumented)
    lookupVariableByName(name: string): Variable[];
    // (undocumented)
    parentMap: WeakMap<Node, Node>;
    // (undocumented)
    _queueDeletion(node: Node): void;
    // (undocumented)
    _queueReplacement(from: Node, to: Node): void;
    // (undocumented)
    _rebuildScopeMap(): void;
    // (undocumented)
    root: Node;
    // (undocumented)
    scopeMap: WeakMap<Variable, Scope>;
    // (undocumented)
    scopeOwnerMap: WeakMap<Node, Scope>;
    // (undocumented)
    validate(): any;
    // (undocumented)
    variables: Set<Variable>;
}

// @public (undocumented)
export class PureFunctionAssessment {
    constructor(fnNode: AssessmentNode, options?: PureFunctionAssessmentOptions);
    // Warning: (ae-forgotten-export) The symbol "AssessmentNode" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    node: AssessmentNode;
    // Warning: (ae-forgotten-export) The symbol "ImpureFunctionQualities" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    qualities: Set<ImpureFunctionQualities>;
    // (undocumented)
    verdict: PureFunctionVerdict;
}

// @public (undocumented)
export interface PureFunctionAssessmentOptions {
    // (undocumented)
    fnAllowList?: string[];
}

// @public (undocumented)
export enum PureFunctionVerdict {
    // (undocumented)
    Probably = "Probably",
    // (undocumented)
    ProbablyNot = "ProbablyNot"
}

// Warning: (ae-forgotten-export) The symbol "RefactorQueryAPI" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export function refactor(input: string | Node, options?: GlobalStateOptions): RefactorQueryAPI;

// @public (undocumented)
export class RefactorError extends Error {
}

// Warning: (ae-internal-missing-underscore) The name "RefactorSession" should be prefixed with an underscore because the declaration is marked as @internal
//
// @internal @deprecated (undocumented)
export class RefactorSession {
    // (undocumented)
    $(querySessionOrNodes: SelectorOrNode | RefactorSession): RefactorSession;
    constructor(sourceOrNodes: Node | Node[] | string, globalSession?: GlobalState);
    // (undocumented)
    append(selectorOrNode: SelectorOrNode, replacer: Replacer): GlobalState;
    // (undocumented)
    cleanup(): this;
    // (undocumented)
    closest(originSelector: SelectorOrNode, closestSelector: string): Node[];
    // (undocumented)
    delete(selectorOrNode?: SelectorOrNode): GlobalState;
    // (undocumented)
    find(selectorOrNode: string): Node[];
    // (undocumented)
    findDeclarations(node: SimpleIdentifier | SimpleIdentifierOwner): Declaration[];
    // (undocumented)
    findMatchingExpression(sampleSrc: string): Expression[];
    // (undocumented)
    findMatchingStatement(sampleSrc: string): Statement[];
    // (undocumented)
    findOne(selectorOrNode: string): Node;
    // (undocumented)
    findParents(selectorOrNode: SelectorOrNode): Node[];
    // (undocumented)
    findReferences(node: SimpleIdentifier | SimpleIdentifierOwner): Reference[];
    // (undocumented)
    first(): Node;
    // (undocumented)
    globalSession: GlobalState;
    // (undocumented)
    get length(): number;
    // (undocumented)
    nodes: Node[];
    // (undocumented)
    prepend(selectorOrNode: SelectorOrNode, replacer: Replacer): GlobalState;
    // (undocumented)
    print(ast?: Node): any;
    // (undocumented)
    query(selector: string | string[]): Node[];
    // (undocumented)
    queryFrom(astNodes: Node | Node[], selectorOrNode: string): Node[];
    // (undocumented)
    rename(selectorOrNode: SelectorOrNode, newName: string): this;
    // (undocumented)
    renameInPlace(lookup: Variable, newName: string): void;
    // (undocumented)
    replace(selectorOrNode: SelectorOrNode, replacer: Replacer | AsyncReplacer): number;
    // (undocumented)
    replaceAsync(selectorOrNode: SelectorOrNode, replacer: AsyncReplacer): Promise<number>;
    // (undocumented)
    replaceRecursive(selectorOrNode: SelectorOrNode, replacer: Replacer): this;
    // (undocumented)
    get root(): Node;
    // (undocumented)
    _root?: Node;
    // (undocumented)
    subSession(querySessionOrNodes: SelectorOrNode | RefactorSession): RefactorSession;
}

// Warning: (ae-forgotten-export) The symbol "Pluggable" needs to be exported by the entry point index.d.ts
//
// @public (undocumented)
export interface RefactorSessionChainable extends Pluggable {
}

// @public (undocumented)
export class RefactorSessionChainable {
    // (undocumented)
    $(queryOrNodes: SelectorOrNode): RefactorQueryAPI;
    // Warning: (ae-incompatible-release-tags) The symbol "__constructor" is marked as @public, but its signature references "RefactorSession" which is marked as @internal
    constructor(session: RefactorSession);
    // (undocumented)
    append(replacer: Replacer): RefactorSessionChainable;
    // (undocumented)
    closest(closestSelector: string): RefactorQueryAPI;
    // (undocumented)
    codegen(): any[];
    // @internal (undocumented)
    static create(session: RefactorSession): RefactorQueryAPI;
    // (undocumented)
    declarations(): Declaration[][];
    // (undocumented)
    delete(): this;
    // (undocumented)
    find(iterator: (node: any, i?: number) => any): RefactorQueryAPI;
    // (undocumented)
    findMatchingExpression(sampleSrc: string): RefactorQueryAPI;
    // (undocumented)
    findMatchingStatement(sampleSrc: string): RefactorQueryAPI;
    // (undocumented)
    findOne(selectorOrNode: string): RefactorQueryAPI;
    // (undocumented)
    first(): Node;
    // (undocumented)
    forEach(iterator: (node: any, i?: number) => any): RefactorSessionChainable;
    // (undocumented)
    get(index: number): Node;
    // (undocumented)
    get length(): number;
    // (undocumented)
    logOut(): this;
    // (undocumented)
    lookupVariable(): Variable[];
    // (undocumented)
    lookupVariableByName(name: string): Variable[];
    // (undocumented)
    map(iterator: (node: any, i?: number) => any): any[];
    // (undocumented)
    get nodes(): Node[];
    // (undocumented)
    parents(): RefactorQueryAPI;
    // Warning: (ae-forgotten-export) The symbol "Plugin" needs to be exported by the entry point index.d.ts
    //
    // (undocumented)
    static plugins: Plugin[];
    // (undocumented)
    prepend(replacer: Replacer): RefactorSessionChainable;
    // (undocumented)
    print(): any;
    // (undocumented)
    query(selector: string | string[]): RefactorQueryAPI;
    // (undocumented)
    references(): Reference[][];
    // (undocumented)
    rename(newName: string): this;
    // (undocumented)
    replace(replacer: Replacer): RefactorSessionChainable;
    // (undocumented)
    replaceAsync(replacer: AsyncReplacer): Promise<number>;
    // (undocumented)
    replaceChildren(query: SelectorOrNode, replacer: Replacer): RefactorSessionChainable;
    // (undocumented)
    get root(): Node;
    // Warning: (ae-incompatible-release-tags) The symbol "session" is marked as @public, but its signature references "RefactorSession" which is marked as @internal
    //
    // (undocumented)
    session: RefactorSession;
    // (undocumented)
    toJSON(): string;
    // Warning: (ae-forgotten-export) The symbol "Constructor" needs to be exported by the entry point index.d.ts
    //
    // @internal (undocumented)
    static with<S extends Constructor<any> & Pluggable, T extends Plugin>(this: S, plugin: T): S & Pluggable & Constructor<ReturnType<T>>;
}

// @public (undocumented)
export type Replacer = Node | string | ((node: Node) => string | Node);

// @public (undocumented)
export type SelectorOrNode = string | string[] | Node | Node[];


// (No @packageDocumentation comment for this package)

```
